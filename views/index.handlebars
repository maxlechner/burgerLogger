<h1>Eat the burger</h1>
<img src="http://theworldsbestever.s3.amazonaws.com/blog/wp-content/uploads/2012/02/bbbbuger.gif" alt="burger GIF" width="25%">


<h2>Burger choices!</h2>

<ul id="dev_list">
  {{#each burgers}}
    {{#unless devoured}}
      <p>
        {{this.id}}.{{this.burger_name}}
        <button data-burgerid="{{this.id}}" id="devour">Devour it!</button>
      </p>
    {{/unless}}
  {{/each}}
</ul>

<h2>Burgers that have been devoured!</h2>

<ul>
  {{#each burgers}}
    {{#if devoured}}
        <p>
          {{this.id}}.{{this.burger_name}}
          <button class="delete-burger" data-burgerid="{{this.id}}" id="delete">Delete it!</button>
        </p>
    {{/if}}
  {{/each}}
</ul>

<div id = "add_a_burger">
<h2 id = "add_b_h2"> Add your burger</h2>
  <textarea id = "burg" type="text" name="burger_name"></textarea>
  <button id = "add" type="button">Submit </button>
<p id = "add_b_p" >Enter a burger you want to eat and click Submit</p>
</div>

<script type="text/javascript">
{{!--  --}}
$("#dev_list").on("click", "button", function () {
  console.log($(this).attr("data-burgerid"))
  const id = $(this).attr("data-burgerid")
   $.ajax("/api/burgers/" + id, {
      type: "PUT",
      data: {devoured: true}
    }).then(
      function() {
        console.log("burger devoured");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

$("#add").on("click", function () {
  console.log($("#burg").val().trim())
   $.ajax("/api/burgers/", {
      type: "POST",
      data: {burger_name: $("#burg").val().trim()}
    }).then(
      function() {
        console.log("burger saved");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $("#devour").on("click", function () {
  console.log($("#burg").val().trim())
   $.ajax("/api/burgers/", {
      type: "POST",
      data: {burger_name: $("#burg").val().trim()}
    }).then(
      function() {
        console.log("burger saved");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
</script>
